<div id="primary" class="sidebar">
    <ul>
        
        {% unless page.url == '/' %}
        <li id="home-link">
            <h3><a href="{{ '/' | relative_url }}" title="{{ site.title | escape }}">Home</a></h3>
        </li>
        {% endunless %}
        
        <!-- Pages -->
        <h3>Pages</h3>
        {% assign nav_pages = site.pages | sort: 'order' %}
        {% for page in nav_pages %}
            {% if page.title and page.navigation != false %}
            <li class="page_item">
                <a href="{{ page.url | relative_url }}">{{ page.title | escape }}</a>
            </li>
            {% endif %}
        {% endfor %}
        
        <!-- Categories -->
        {% if site.categories.size > 0 %}
        <li id="categories">
            <h3>Categories</h3>
            <ul>
                {% for category in site.categories %}
                <li>
                    <a href="{{ '/category/' | append: category.first | relative_url }}">
                        {{ category.first }} ({{ category.last.size }})
                    </a>
                </li>
                {% endfor %}
            </ul>
        </li>
        {% endif %}
        
        <!-- Tags -->
        {% if site.tags.size > 0 %}
        <li id="tag-cloud">
            <h3>Tags</h3>
            <p>
                {% for tag in site.tags %}
                <a href="{{ '/tag/' | append: tag.first | relative_url }}" 
                   style="font-size: {% assign tag_size = tag.last.size %}{% if tag_size > 5 %}1.2{% elsif tag_size > 2 %}1.1{% else %}1.0{% endif %}em;">
                    {{ tag.first }}
                </a>
                {% unless forloop.last %} {% endunless %}
                {% endfor %}
            </p>
        </li>
        {% endif %}
        
        <!-- RSS Feeds -->
        <li id="feed-links">
            <h3>RSS Feeds</h3>
            <ul>
                <li><a href="{{ '/feed.xml' | relative_url }}" title="{{ site.title | escape }} RSS Feed" rel="alternate" type="application/rss+xml">All posts</a></li>
            </ul>
        </li>
        
        <!-- Search -->
        <li id="search">
            <h3><label for="search-input">Blog Search</label></h3>
            <form id="searchform" action="{{ '/search.html' | relative_url }}" method="get">
                <div>
                    <input id="search-input" name="q" type="text" placeholder="Search..." size="10" />
                    <input id="searchsubmit" type="submit" value="Search" />
                </div>
            </form>
        </li>
        
    </ul>
</div>